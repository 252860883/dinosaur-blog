{"version":3,"sources":["components/headerLink.tsx","article/小程序优化总结.js"],"names":["Main","clickPosBtn","idName","dom","document","getElementById","window","scrollTo","top","offsetTop","left","behavior","_this2","this","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","props","headerLink","map","item","index","level","key","onClick","title","React","Component","Template","_this","Object","_Users_honghuidu_homework_dinosaur_blog_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","_Users_honghuidu_homework_dinosaur_blog_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_honghuidu_homework_dinosaur_blog_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","react__WEBPACK_IMPORTED_MODULE_5__","_components_headerLink__WEBPACK_IMPORTED_MODULE_7__","id"],"mappings":"kLAEqBA,qNAGjBC,YAAc,SAACC,GACX,IAAMC,EAAWC,SAASC,eAAeH,GACzCI,OAAOC,SAAS,CACZC,IAAKL,EAAIM,UAAY,GACrBC,KAAM,EACNC,SAAU,iIAIT,IAAAC,EAAAC,KACL,OACIC,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACXH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OAAf,2BAEIJ,KAAKK,MAAMC,WAAWC,IAAI,SAACC,EAAWC,GAClC,OAAOR,EAAAC,EAAAC,cAAA,QAAMC,UAAW,IAAMI,EAAKE,MAAOC,IAAKF,EAAOG,QAAS,kBAAMb,EAAKX,YAAYoB,EAAKK,SAASL,EAAKK,mBApBvGC,IAAMC,wLCCnBC,cACjB,SAAAA,IAAc,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAlB,KAAAgB,IACVC,EAAAC,OAAAE,EAAA,EAAAF,CAAAlB,KAAAkB,OAAAG,EAAA,EAAAH,CAAAF,GAAAM,KAAAtB,QACKuB,MAAQ,CACTjB,WAAY,CAAC,CAACI,MAAQ,KAAKG,MAAQ,0CAAY,CAACH,MAAQ,KAAKG,MAAQ,8CAAW,CAACH,MAAQ,KAAKG,MAAQ,4BAAQ,CAACH,MAAQ,KAAKG,MAAQ,wCAAU,CAACH,MAAQ,KAAKG,MAAQ,0CAAY,CAACH,MAAQ,KAAKG,MAAQ,gDAAkB,CAACH,MAAQ,KAAKG,MAAQ,qDAAuB,CAACH,MAAQ,KAAKG,MAAQ,0DAAa,CAACH,MAAQ,KAAKG,MAAQ,iCAHxTI,mKAWV,OACIhB,EAAAC,EAAAC,cAACqB,EAAA,SAAD,KACIvB,EAAAC,EAAAC,cAACsB,EAAA,EAAD,CAAYnB,WAAYN,KAAKuB,MAAMjB,aACnCL,EAAAC,EAAAC,cAAA,OAAKC,UAAU,WAC/BH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBAAgBH,EAAAC,EAAAC,cAAA,MAAIC,UAAU,SAAd,+CAC/BH,EAAAC,EAAAC,cAAA,kBACEF,EAAAC,EAAAC,cAAA,0TAGFF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,0CAAP,0CAEAzB,EAAAC,EAAAC,cAAA,kBACEF,EAAAC,EAAAC,cAAA,0NAGFF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,8CAAP,8CAEAzB,EAAAC,EAAAC,cAAA,iPAEAF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,4BAAP,4BAEAzB,EAAAC,EAAAC,cAAA,oTAEAF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,wCAAP,wCAEAzB,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,oHACAF,EAAAC,EAAAC,cAAA,4FACAF,EAAAC,EAAAC,cAAA,oHACAF,EAAAC,EAAAC,cAAA,mDAGAF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,0CAAP,0CAEAzB,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,gDAAP,gDAEAzB,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,yNACAF,EAAAC,EAAAC,cAAA,4LACAF,EAAAC,EAAAC,cAAA,gRAGAF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,qDAAP,qDAEAzB,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,kDACAF,EAAAC,EAAAC,cAAA,kFAGAF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,0DAAP,0DAEAzB,EAAAC,EAAAC,cAAA,UACAF,EAAAC,EAAAC,cAAA,iLAGAF,EAAAC,EAAAC,cAAA,MAAIuB,GAAG,+BAAP,+BAEAzB,EAAAC,EAAAC,cAAA,8bAA6EF,EAAAC,EAAAC,cAAA,0CAA7E,0GAEAF,EAAAC,EAAAC,cAAA,0LAAgCF,EAAAC,EAAAC,cAAA,2BAAhC,yOAAgGF,EAAAC,EAAAC,cAAA,mCAAhG,iBAEAF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,YAAMF,EAAAC,EAAAC,cAAA,aACXF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,8BACAF,EAAAC,EAAAC,cAAA,2CACAF,EAAAC,EAAAC,cAAA,+CAAuC,KACvCF,EAAAC,EAAAC,cAAA,yEACAF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,kDAA0C,KAC1CF,EAAAC,EAAAC,cAAA,2CAAmC,KACnCF,EAAAC,EAAAC,cAAA,8CACAF,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,8CAAsC,KACtCF,EAAAC,EAAAC,cAAA,yEACAF,EAAAC,EAAAC,cAAA,yCACAF,EAAAC,EAAAC,cAAA,yCACAF,EAAAC,EAAAC,cAAA,sDACAF,EAAAC,EAAAC,cAAA,oDACAF,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,gCACAF,EAAAC,EAAAC,cAAA,iCACAF,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,0DAAkD,KAClDF,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,gCAAwB,KACxBF,EAAAC,EAAAC,cAAA,yCACAF,EAAAC,EAAAC,cAAA,uCACAF,EAAAC,EAAAC,cAAA,iBACAF,EAAAC,EAAAC,cAAA,eAGAF,EAAAC,EAAAC,cAAA,8BAAMF,EAAAC,EAAAC,cAAA,4BAAN,qIAEAF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,YAAMF,EAAAC,EAAAC,cAAA,aACXF,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,8DACAF,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAA,wBAAgB,IAAK,IAArB,YACAF,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAA,oEACAF,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,6BAAqB,IAAK,IAA1B,eACAF,EAAAC,EAAAC,cAAA,mCAA2B,IAAK,IAAhC,uBACAF,EAAAC,EAAAC,cAAA,kCAA0B,IAAK,IAA/B,sBACAF,EAAAC,EAAAC,cAAA,iCAAyB,IAAK,IAA9B,sBACAF,EAAAC,EAAAC,cAAA,oCACAF,EAAAC,EAAAC,cAAA,yFAAiF,IAAK,IAAtF,gBAAwG,IAAK,IAA7G,aACAF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,uBACAF,EAAAC,EAAAC,cAAA,wBAlIsCW,IAAMC","file":"static/js/33.9f5ab96e.chunk.js","sourcesContent":["import React from 'react'\nimport \"../style/components/headerLink.scss\"\nexport default class Main extends React.Component<any, any>{\n    componentDidMount() { }\n\n    clickPosBtn = (idName: string) => {\n        const dom: any = document.getElementById(idName);\n        window.scrollTo({\n            top: dom.offsetTop - 10,\n            left: 0,\n            behavior: 'smooth'\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"headerLink\">\n                <div className=\"content\">\n                    <div className=\"real-content\">\n                        <div className='tag'>Reading Assistance ·</div>\n                        {\n                            this.props.headerLink.map((item: any, index: number) => {\n                                return <span className={'a' + item.level} key={index} onClick={() => this.clickPosBtn(item.title)}>{item.title}</span>\n                            })\n                        }\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}","import React, { Fragment } from 'react'\nimport '../style/main.scss'\nimport HeaderLink from \"../components/headerLink\"\nexport default class Template extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n            headerLink: [{\"level\":\"h2\",\"title\":\"1.启动加载性能\"},{\"level\":\"h4\",\"title\":\"控制代码包大小\"},{\"level\":\"h4\",\"title\":\"分包加载\"},{\"level\":\"h4\",\"title\":\"首屏加载优化\"},{\"level\":\"h2\",\"title\":\"2.渲染性能优化\"},{\"level\":\"h4\",\"title\":\"避免不当使用 setData\"},{\"level\":\"h4\",\"title\":\"避免不当使用 onPageScroll\"},{\"level\":\"h4\",\"title\":\"建议使用自定义组件\"},{\"level\":\"h4\",\"title\":\"WXS响应事件\"}]\n        }\n    }\n    componentWillMount(){\n    }\n    componentDidMount() {\n    }\n    render() {\n        return (\n            <Fragment>\n                <HeaderLink headerLink={this.state.headerLink}></HeaderLink>\n                <div className=\"article\">\n<div className=\"title-content\"><h1 className=\"title\">小程序优化总结</h1></div>\n<blockquote>\n  <p>小程序的优化主要分两个方向优化，一个是对启动时的加载时间进行优化，另一个是在对页面进行渲染时的优化。</p>\n</blockquote>\n\n<h2 id='1.启动加载性能'>1.启动加载性能</h2>\n\n<blockquote>\n  <p>小程序打开经历的三个步骤：资源准备、业务代码注入和渲染、异步请求数据</p>\n</blockquote>\n\n<h4 id='控制代码包大小'>控制代码包大小</h4>\n\n<p>压缩工具进行压缩，及时清理无用代码和资源、减少图片等资源文件（换成网络图片）</p>\n\n<h4 id='分包加载'>分包加载</h4>\n\n<p>主包只保留最常用的核心页面，启动时只加载主包（优化：即将推出 分包预加载、独立分包：不需要下载主包）</p>\n\n<h4 id='首屏加载优化'>首屏加载优化</h4>\n\n<ul>\n<li>提前请求，不需要页面显示之后再加载</li>\n<li>利用缓存，二次调用先调请求</li>\n<li>避免白屏，先展示页面骨架和基础内容</li>\n<li>及时反馈用户</li>\n</ul>\n\n<h2 id='2.渲染性能优化'>2.渲染性能优化</h2>\n\n<h4 id='避免不当使用 setData'>避免不当使用 setData</h4>\n\n<ul>\n<li>每次的setData调用都是一次进程的通信操作，建议data对象只存储与页面相关的数据</li>\n<li>通信开销和数据量成正比，建议使用key值来进行局部渲染（虚拟dom）</li>\n<li>setData会引发视图层的内容更新，由于 js单线程的原因会阻塞用户交互，所以对连续的setData操作进行合并</li>\n</ul>\n\n<h4 id='避免不当使用 onPageScroll'>避免不当使用 onPageScroll</h4>\n\n<ul>\n<li>少用</li>\n<li>避免复杂逻辑</li>\n<li>在事件中减少频繁调用setData</li>\n</ul>\n\n<h4 id='建议使用自定义组件'>建议使用自定义组件</h4>\n\n<ul>\n<li>自定义组件更新只在自己的内部发生更新，不会造成全局重绘</li>\n</ul>\n\n<h4 id='WXS响应事件'>WXS响应事件</h4>\n\n<p>有频繁用户交互的效果在小程序上表现是比较卡顿的,因为每进行一次操作就会经过2次的逻辑层和渲染层的通信以及一次渲染。为了解决这个问题，微信小程序提供了<code>WX响应事件</code>。基本思路就是让事件在视图层响应。</p>\n\n<p>下面我们来动手实现一个元素跟随鼠标移动的效果。首先定义一个<code>movable.wxs</code>文件，与其他点击事件的区别是传参多了第二个参数，它表示触发事件的组件(或页面)的<code>ComponentDescriptor</code>实例,</p>\n\n<pre><code><span></span>\n<span>// movable.wxs</span>\n<span>var startX = 0</span>\n<span>var startY = 0</span>\n<span>var lastLeft = lastTop = 50</span>\n<span>function touchstart(event, ins) {'{'}</span>\n<span>  var touch = event.touches[0] || event.changedTouches[0]</span>\n<span>  startX = touch.pageX</span>\n<span>  startY = touch.pageY</span>\n<span>  ins.callMethod('testCallmethod', {'{'}</span>\n<span>    complete: function(res) {'{'}</span>\n<span>      console.log('args', res)</span>\n<span>    }</span>\n<span>  })</span>\n<span>}</span>\n<span>function touchmove(event, ins) {'{'}</span>\n<span>  var touch = event.touches[0] || event.changedTouches[0]</span>\n<span>  var pageX = touch.pageX</span>\n<span>  var pageY = touch.pageY</span>\n<span>  var left = pageX - startX + lastLeft</span>\n<span>  var top = pageY - startY + lastTop</span>\n<span>  startX = pageX</span>\n<span>  startY = pageY</span>\n<span>  lastLeft = left</span>\n<span>  lastTop = top</span>\n<span>  ins.selectComponent('.movable').setStyle({'{'}</span>\n<span>    left: left + 'px',</span>\n<span>    top: top + 'px'</span>\n<span>  })</span>\n<span>}</span>\n<span>module.exports = {'{'}</span>\n<span>  touchstart: touchstart,</span>\n<span>  touchmove: touchmove,</span>\n<span>}</span>\n<span></span>\n</code></pre>\n\n<p>下面在<code>movable.wxml</code>文件中引入wxs文件，再进行事件的调用就可以了：</p>\n\n<pre><code><span></span>\n<span>// movable.wxml</span>\n<span>&lt;wxs module=\"test\" src=\"./movable.wxs\"&gt;&lt;/wxs&gt; </span>\n<span>&lt;view </span>\n<span>  wx:if=\"{'{'}{'{'}show}}\" </span>\n<span>  class=\"area\" </span>\n<span>  style='position:relative;width:100%;height:100%;'&gt;</span>\n<span>  &lt;view </span>\n<span>    data-index=\"1\" </span>\n<span>    data-obj=\"{'{'}{'{'}dataObj}}\" </span>\n<span>    bindtouchstart=\"{'{'}{'{'}test.touchstart}}\" </span>\n<span>    bindtouchmove=\"{'{'}{'{'}test.touchmove}}\" </span>\n<span>    bindtouchend='{'{'}{'{'}test.touchmove}}' </span>\n<span>    class=\"movable\" </span>\n<span>    style=\"position:absolute;width:100px;height:100px;background:red;left:{'{'}{'{'}left}}px;top:{'{'}{'{'}top}}px\"&gt;</span>\n<span>  &lt;/view&gt;</span>\n<span>&lt;/view&gt;</span>\n<span></span>\n</code></pre>\n</div>\n            </Fragment>\n        )\n    }\n}"],"sourceRoot":""}